"use strict";(self.webpackChunk_fuse_starter=self.webpackChunk_fuse_starter||[]).push([[897],{2897:(b,v,n)=>{n.r(v),n.d(v,{LocationModule:()=>G});var l=n(8583),e=n(7716),g=n(6457),h=n(3729),u=n(5108),r=n(8295),p=n(7441),c=n(2177),m=n(2458);const _=["search"];function A(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"agm-marker",11),e.NdJ("dragEnd",function(d){const f=e.CHM(t).$implicit;return e.oxw().handleDrag(d,f.id)}),e.qZA()}if(2&i){const t=o.$implicit;e.Q6J("latitude",t.position.lat)("longitude",t.position.lng)("markerDraggable",!0)}}const E=function(i,o){return{lat:i,lng:o}};function Z(i,o){if(1&i&&e._UZ(0,"agm-direction",13),2&i){const t=e.oxw().$implicit;e.Q6J("destination",t.destination)("origin",e.WLB(2,E,t.lat,t.lng))}}function M(i,o){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Z,1,5,"agm-direction",12),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.visible&&t.destination)}}function z(i,o){if(1&i&&(e.TgZ(0,"mat-option",14),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}let I=(()=>{class i{constructor(t,a,d){this._mapsAPILoader=t,this.ngZone=a,this.driversService=d,this.urlIcon={url:"./assets/icons/vehicle-icon.svg",scaledSize:{width:40,height:60}},this.vehicles=[{id:1,market:{lat:-.24760574202618602,lng:-78.50391469031592},lat:-.24760574202618602,lng:-78.50391469031592,plate:"ABC123",driver:"Carlos Aguas",weight:"100Kg",destination:{lat:-.243212231704593,lng:-78.49716839261214},visible:!1},{id:2,market:{lat:-.25230475446628225,lng:-78.49079140221122},lat:-.25230475446628225,lng:-78.49079140221122,plate:"ABC123",driver:"Carlos Aguas",weight:"100Kg",visible:!1},{id:3,market:{lat:-.24110415662532048,lng:-78.4776582670751},lat:-.24110415662532048,lng:-78.4776582670751,plate:"ABC123",driver:"Carlos Aguas",weight:"100Kg",visible:!1},{id:4,market:{lat:-.2347569010933538,lng:-78.49382779755152},lat:-.2347569010933538,lng:-78.49382779755152,plate:"ABC123",driver:"Carlos Aguas",weight:"100Kg",visible:!1},{id:5,market:{lat:-.23771384390782055,lng:-78.53168091803809},lat:-.23771384390782055,lng:-78.53168091803809,plate:"ABC123",driver:"Carlos Aguas",weight:"100Kg",visible:!1},{id:6,market:{lat:-.2544463678769816,lng:-78.47692023145623},lat:-.2544463678769816,lng:-78.47692023145623,plate:"ABC123",driver:"Carlos Aguas",weight:"100Kg",visible:!1}],this.puntos=[],this.newEventDialog=!1,this.viewEventsDialog=!1,this.data=[],this.distrits=[],this.selectDistrict=1}ngOnInit(){this._mapsAPILoader.load().then(()=>{this.setCurrentLocation(),this.geocoder=new google.maps.Geocoder}),this.driversService.getDistrict("1").subscribe(t=>{this.distrits=t})}selectionAddress(t){this.loadPoints(t.value)}loadPoints(t){this.driversService.getAddress(t).subscribe(a=>{let d=[];console.log(a),a.forEach(s=>{const f=s.coords.split(","),D={position:{lat:parseFloat(f[0]),lng:parseFloat(f[1])},name:s.name,id:s.id};d=[...d,D]}),this.puntos=d})}setCurrentLocation(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(t=>{this.lat=t.coords.latitude,this.lng=t.coords.longitude},t=>{console.log(t),this.lat=-12.040607,this.lng=-77.040365})}visibleDirection(t){this.vehicles=this.vehicles.map(a=>a.id===t?Object.assign(Object.assign({},a),{visible:!0}):a)}showNewEventDialog(){this.newEventDialog=!0}showViewEventsDialog(){this.viewEventsDialog=!0}closeDialog(t){this.newEventDialog=t}onClickMap(t){this.showNewEventDialog(),this.latEvent=t.coords.lat,this.lngEvent=t.coords.lng}addEvent(t){this.data.push(t)}closeDialogData(t){this.viewEventsDialog=t}closeAddEvent(t){this.newEventDialog=t}handleDrag(t,a){console.log(t,a),this.driversService.updatePoints(a,{name:"",coords:`${t.coords.lat},${t.coords.lng}`}).subscribe(s=>{console.log(s)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.W7),e.Y36(e.R0b),e.Y36(h.P))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-location"]],viewQuery:function(t,a){if(1&t&&e.Gf(_,5),2&t){let d;e.iGM(d=e.CRH())&&(a.search=d.first)}},decls:15,vars:9,consts:[[1,"w-full"],[1,"w-full","h-full",3,"latitude","longitude","zoom","disableDoubleClickZoom","fullscreenControl","mapDblClick"],["class","w-5 h-5",3,"latitude","longitude","markerDraggable","dragEnd",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"p-3","m-3","bg-white","rounded","absolute","top-0","left-0","drop-shadow-xl"],[1,"grid","grid-flow-col","auto-cols-max","place-items-center"],[1,"text-3xl","font-bold","mr-2"],["layout","vertical"],["id","combo",1,"md:w-100","sm:w-50"],[3,"value","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"w-5","h-5",3,"latitude","longitude","markerDraggable","dragEnd"],[3,"destination","origin",4,"ngIf"],[3,"destination","origin"],[3,"value"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"agm-map",1),e.NdJ("mapDblClick",function(s){return a.onClickMap(s)}),e.YNc(2,A,1,3,"agm-marker",2),e.YNc(3,M,2,1,"div",3),e.qZA(),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"h1",6),e._uU(7,"Mapa"),e.qZA(),e._UZ(8,"p-divider",7),e.TgZ(9,"mat-form-field",8),e.TgZ(10,"mat-label"),e._uU(11,"Distritos"),e.qZA(),e.TgZ(12,"mat-select",9),e.NdJ("selectionChange",function(s){return a.selectionAddress(s)}),e.YNc(13,z,2,2,"mat-option",10),e.qZA(),e.qZA(),e._UZ(14,"p-divider",7),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("latitude",a.lat)("longitude",a.lng)("zoom",14)("disableDoubleClickZoom",!0)("fullscreenControl",!0),e.xp6(1),e.Q6J("ngForOf",a.puntos),e.xp6(1),e.Q6J("ngForOf",a.vehicles),e.xp6(9),e.Q6J("value",a.selectDistrict),e.xp6(1),e.Q6J("ngForOf",a.distrits))},directives:[g.SA,l.sg,u.i,r.KE,r.hX,p.gD,g.pt,l.O5,c.w,m.ey],encapsulation:2}),i})();var F=n(3423),C=n(1740),y=n(5593),T=n(1795),L=n(805);let J=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[l.ez],L.m8]}),i})();var x=n(3679),j=n(1769),B=n(7489),N=n(9529),P=n(369),U=n(2453),k=n(1512),K=n(9983),R=n(1095),$=n(4885),Y=n(3425),W=n(6627),X=n(2210);const H=[{path:"",component:I}];let G=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[l.ez,F.Bz.forChild(H),u.x,g.su,C.j,y.hJ,T.T,J,x.UX,j.t,y.hJ,T.T,B.m,N.U$,l.ez,P.n,U.EV,k.S,x.UX,r.lN,K.c,R.ot,$.Cq,Y.gz,C.j,W.Ps,X.kW,c.i,p.LD]]}),i})()},5108:(b,v,n)=>{n.d(v,{i:()=>h,x:()=>u});var l=n(7716),e=n(8583);const g=["*"];let h=(()=>{class r{constructor(){this.layout="horizontal",this.type="solid"}containerClass(){return{"p-divider p-component":!0,"p-divider-horizontal":"horizontal"===this.layout,"p-divider-vertical":"vertical"===this.layout,"p-divider-solid":"solid"===this.type,"p-divider-dashed":"dashed"===this.type,"p-divider-dotted":"dotted"===this.type,"p-divider-left":"horizontal"===this.layout&&(!this.align||"left"===this.align),"p-divider-center":"horizontal"===this.layout&&"center"===this.align||"vertical"===this.layout&&(!this.align||"center"===this.align),"p-divider-right":"horizontal"===this.layout&&"right"===this.align,"p-divider-top":"vertical"===this.layout&&"top"===this.align,"p-divider-bottom":"vertical"===this.layout&&"bottom"===this.align}}}return r.\u0275fac=function(c){return new(c||r)},r.\u0275cmp=l.Xpm({type:r,selectors:[["p-divider"]],hostAttrs:[1,"p-element"],inputs:{styleClass:"styleClass",style:"style",layout:"layout",type:"type",align:"align"},ngContentSelectors:g,decls:3,vars:4,consts:[["role","separator",3,"ngClass","ngStyle"],[1,"p-divider-content"]],template:function(c,m){1&c&&(l.F$t(),l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.Hsn(2),l.qZA(),l.qZA()),2&c&&(l.Tol(m.styleClass),l.Q6J("ngClass",m.containerClass())("ngStyle",m.style))},directives:[e.mk,e.PC],styles:['.p-divider-horizontal{display:flex;width:100%;position:relative;align-items:center}.p-divider-horizontal:before{position:absolute;display:block;top:50%;left:0;width:100%;content:""}.p-divider-horizontal.p-divider-left{justify-content:flex-start}.p-divider-horizontal.p-divider-right{justify-content:flex-end}.p-divider-horizontal.p-divider-center{justify-content:center}.p-divider-content{z-index:1}.p-divider-vertical{min-height:100%;margin:0 1rem;display:flex;position:relative;justify-content:center}.p-divider-vertical:before{position:absolute;display:block;top:0;left:50%;height:100%;content:""}.p-divider-vertical.p-divider-top{align-items:flex-start}.p-divider-vertical.p-divider-center{align-items:center}.p-divider-vertical.p-divider-bottom{align-items:flex-end}.p-divider-solid.p-divider-horizontal:before{border-top-style:solid}.p-divider-solid.p-divider-vertical:before{border-left-style:solid}.p-divider-dashed.p-divider-horizontal:before{border-top-style:dashed}.p-divider-dashed.p-divider-vertical:before{border-left-style:dashed}.p-divider-dotted.p-divider-horizontal:before{border-top-style:dotted}.p-divider-dotted.p-divider-horizontal:before{border-left-style:dotted}\n'],encapsulation:2,changeDetection:0}),r})(),u=(()=>{class r{}return r.\u0275fac=function(c){return new(c||r)},r.\u0275mod=l.oAB({type:r}),r.\u0275inj=l.cJS({imports:[[e.ez]]}),r})()}}]);